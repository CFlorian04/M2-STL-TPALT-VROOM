<div class="page-header" filter-color="orange">
    <div class="page-header-image" style="background-image:url(assets/img/login_background.jpg)"></div>
    <div class="container">
        <div class="col-md-4 content-center">
            <div class="card card-login card-plain">
                <form class="form" [formGroup]="registerForm" (ngSubmit)="onRegister()">
                    <div class="header header-primary text-center">
                        <div class="logo-container">
                            <img src="assets/img/vroom_icon.png" alt="">
                        </div>
                    </div>
                    <div class="content">
                        <!-- Error message -->
                        <div *ngIf="error" class="alert alert-danger">
                            {{ error }}
                        </div>

                        <!-- Success message -->
                        <div *ngIf="success" class="alert alert-success">
                            {{ success }}
                        </div>

                        <!-- First Name field -->
                        <div class="input-group form-group-no-border input-lg" 
                             [ngClass]="{'input-group-focus': focus===true, 'has-danger': hasError('firstName', 'required') || hasError('firstName', 'minlength')}">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="now-ui-icons users_circle-08"></i></span>
                            </div>
                            <input 
                                type="text" 
                                class="form-control" 
                                placeholder="Prénom..." 
                                formControlName="firstName"
                                (focus)="focus=true" 
                                (blur)="focus=false">
                        </div>
                        <div *ngIf="hasError('firstName', 'required')" class="text-danger small">
                            Le prénom est requis.
                        </div>
                        <div *ngIf="hasError('firstName', 'minlength')" class="text-danger small">
                            Le prénom doit contenir au moins 2 caractères.
                        </div>

                        <!-- Last Name field -->
                        <div class="input-group form-group-no-border input-lg" 
                             [ngClass]="{'input-group-focus': focus1===true, 'has-danger': hasError('lastName', 'required') || hasError('lastName', 'minlength')}">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="now-ui-icons text_caps-small"></i></span>
                            </div>
                            <input 
                                type="text" 
                                placeholder="Nom..." 
                                class="form-control" 
                                formControlName="lastName"
                                (focus)="focus1=true" 
                                (blur)="focus1=false">
                        </div>
                        <div *ngIf="hasError('lastName', 'required')" class="text-danger small">
                            Le nom est requis.
                        </div>
                        <div *ngIf="hasError('lastName', 'minlength')" class="text-danger small">
                            Le nom doit contenir au moins 2 caractères.
                        </div>

                        <!-- Email field -->
                        <div class="input-group form-group-no-border input-lg" 
                             [ngClass]="{'input-group-focus': focus2===true, 'has-danger': hasError('email', 'required') || hasError('email', 'email')}">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="now-ui-icons ui-1_email-85"></i></span>
                            </div>
                            <input 
                                type="email" 
                                placeholder="Email..." 
                                class="form-control" 
                                formControlName="email"
                                (focus)="focus2=true" 
                                (blur)="focus2=false">
                        </div>
                        <div *ngIf="hasError('email', 'required')" class="text-danger small">
                            L'email est requis.
                        </div>
                        <div *ngIf="hasError('email', 'email')" class="text-danger small">
                            Veuillez entrer un email valide.
                        </div>

                        <!-- Password field -->
                        <div class="input-group form-group-no-border input-lg" 
                             [ngClass]="{'input-group-focus': focus3===true, 'has-danger': hasError('password', 'required') || hasError('password', 'minlength')}">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="now-ui-icons ui-1_lock-circle-open"></i></span>
                            </div>
                            <input 
                                type="password" 
                                placeholder="Mot de passe..." 
                                class="form-control" 
                                formControlName="password"
                                (focus)="focus3=true" 
                                (blur)="focus3=false">
                        </div>
                        <div *ngIf="hasError('password', 'required')" class="text-danger small">
                            Le mot de passe est requis.
                        </div>
                        <div *ngIf="hasError('password', 'minlength')" class="text-danger small">
                            Le mot de passe doit contenir au moins 6 caractères.
                        </div>
                    </div>
                    <div class="footer text-center">
                        <button 
                            type="submit" 
                            class="btn btn-primary btn-round btn-lg btn-block"
                            [disabled]="registerForm.invalid || isLoading">
                            <span *ngIf="isLoading" class="spinner-border spinner-border-sm mr-1" role="status" aria-hidden="true"></span>
                            S'inscrire
                        </button>
                    </div>
                    <div class="pull-left">
                        <h6>
                            <a routerLink="/login" class="link">Déjà inscrit ? Se connecter</a>
                        </h6>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <footer class="footer" data-background-color="black">
        <div class="container">
            <div class="copyright">
                &copy;2025, Réalisé par CODEBECQ Florian & RAZAFINDRAIBE Nandraina
            </div>
        </div>
    </footer>
</div>

